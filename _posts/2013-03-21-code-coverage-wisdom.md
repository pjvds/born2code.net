---
layout: post
title: "Code coverage wisdom"
categories: [programming]
keywords: [tdd, code coverage, testing]
---

What is the proper percentage of test coverage? This morning I discovered a great story that answers it. Enjoy!

## The story

“I am ready to write some unit tests.", the programmer said, "What code coverage should I aim for?”
The great master looked at him and respond. "Don’t worry about coverage, just write some good tests.”
The programmer smiled, bowed, and left.

Later that day, a second programmer asked the same question.
The great master pointed at a pot of boiling water and replied.
“How many grains of rice should put in that pot?”
The programmer, looking puzzled, replied.
“How can I possibly tell you? It depends on how many people you need to feed,
how hungry they are, what other food you are serving, how much rice you have available, and so on.”
"Exactly", the great master replied.
The second programmer smiled, bowed, and left.

Toward the end of the day, a third programmer came and asked the same question about code coverage.
The great master replied in a stern voice, pounding his fist on the table.
“Eighty percent and no less!”
The third programmer smiled, bowed, and left.

After this last reply, a young apprentice approached the great master.
“Great master, today I overheard you answer the same question about code coverage with three different answers. Why?”
The great master stood up from his chair and replied.
“Come get some fresh tea with me and let’s talk about it.”

After they filled their cups with smoking hot green tea, the great master began to answer.
“The first programmer is new and just getting started with testing. Right now he has a lot of code and no tests. He has a long way to go; focusing on code coverage at this time would be depressing and quite useless. He’s better off just getting used to writing and running some tests. He can worry about coverage later.”

“The second programmer, on the other hand, is quite experience both at programming and testing. When I replied by asking her how many grains of rice I should put in a pot, I helped her realize that the amount of testing necessary depends on a number of factors, and she knows those factors better than I do – it’s her code after all. There is no single, simple, answer, and she’s smart enough to handle the truth and work with that.”

“I see,” said the young apprentice, “but if there is no single simple answer, then why did you answer the third programmer ‘Eighty percent and no less’?”

The great master laughed so hard and loud that his belly, evidence that he drank more than just green tea, flopped up and down.

“The third programmer wants only simple answers – even when there are no simple answers, and then does not follow them anyway.”
The young apprentice and the grizzled great master finished drinking their tea in contemplative silence.
